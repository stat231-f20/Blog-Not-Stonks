---
title: "data_wrangling"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(janitor)
library(lubridate)
```

## Load In Data


```{r}
#replace with your location of file
#t=Year, k=Product category (HS 6-digit code), i=Exporter (ISO 3-digit country code)
#j=Importer (ISO 3-digit country code), v=Value of the trade flow (in thousands current USD)
#q=Quantity (in metric tons)
tradedata2018 <- read.csv("/Users/samassaf1/Desktop/Data Science/sam's 231 git/Blog-Not-Stonks/Data/trade_2018_hs17.csv")

#replace with your location of file
#3-digit country code
countrycodes <- read.csv("/Users/samassaf1/Desktop/Data Science/sam's 231 git/Blog-Not-Stonks/Data/country_codes.csv")

#replace with your location of file
#6-digit code
productcodes <- read.csv("/Users/samassaf1/Desktop/Data Science/sam's 231 git/Blog-Not-Stonks/Data/product_codes_hs17.csv")

```

##Mutating Data
```{r}
#change variable names
tradedata2018_v1 <- tradedata2018 %>%
  select(c(year=t, product=k, Exporter=i, Importer=j, Value=v, Quantity=q))

#export
countrycodes_v1_export <- countrycodes %>%
  select(Exporter = country_code, Exporter_Name = country_name_full)
tradedata2018_export <- inner_join(tradedata2018_v1, countrycodes_v1_export, by = "Exporter")

#import
countrycodes_v1_import <- countrycodes %>%
  select(Importer = country_code, Importer_Name = country_name_full)
tradedata2018_import <- inner_join(tradedata2018_v1, countrycodes_v1_import, by = "Importer")

#combine the code so countries by name
tradedata2018_both <- left_join(tradedata2018_export, tradedata2018_import, by = c("year", "product", "Exporter", "Importer", "Value", "Quantity")) %>%
  select(year, product, Exporter_Name, Importer_Name, Value, Quantity)




```

